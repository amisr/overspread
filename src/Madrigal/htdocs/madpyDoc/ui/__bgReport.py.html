        <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
          "http://www.w3.org/TR/html40/loose.dtd">

        <html>
         
        <head>
        <title>Module: __bgReport</title>
        </head>

<BODY BGCOLOR=#FFFFFF LINK=#008000 VLINK=#003366>

        <p><i><a href="../index.html">Table of Contents</a></i></p>
        
        <table border="0" cellpadding="5" cellspacing="0" width="100%">
        <tr bgcolor="#88bbee">
            <th rowspan="2"
                valign="top"
                align="left"
                width="10%"><font color="#000000">Module: __bgReport</font>
            </th>
            <th align="right"><font color="#000000">ui/__bgReport.py</font></th>
        </tr>
        <tr>
        <td>
        <h3>__bgReport is the module that runs in a separate process to create a background report.</h3>
<p>    __bgReport contains a number of constants that can be modified to change the rules for
    generating background reports.  These constants are:</p>

<p>    tempDir - the name of the temporary directory on the web server where the reports are saved.
    This directory is located directly beneath the html directory defined in madrigal.cfg as MAD + SERVERDOCABS.</p>

<p>    numDays - the number of days a temporary report is kept on the web server before being deleted
    by this script when it runs.  This script will delete all reports older than numDays each time it
    runs.</p>


<p>$Id: __bgReport.py.html,v 1.7 2009/03/17 14:35:15 brideout Exp $
</p>

<table border="0" cellpadding="5" cellspacing="0" width="100%">

        <tr>
            <th bgcolor="#99ccff"
                rowspan="2"
                valign="top"
                align="left"
                width="20%"
                >
                <font color="#000000">
                  <a name="Functions">Functions</a>&nbsp;
                </font>
            </th>
            <th bgcolor="#99ccff"
                valign="top"
                align="left"
                >
                <font color="#000000">&nbsp;</font>
            </th>
        </tr>
        <tr>
        <td>
        
<a href="#__dropLock">__dropLock</a><br>
<a href="#__getFilterStrList">__getFilterStrList</a><br>
<a href="#__getLock">__getLock</a><br>


        <tr>
            <th bgcolor="#99ccff"
                rowspan="2"
                valign="top"
                align="left"
                width="20%"
                >
                <font color="#000000">
                  <a name="__dropLock"></a>&nbsp;
                </font>
            </th>
            <th bgcolor="#99ccff"
                valign="top"
                align="left"
                >
                <font color="#000000">__dropLock&nbsp;</font>
            </th>
        </tr>
        <tr>
        <td>
        <font color="#000088"><pre>
__dropLock ( filename )

</pre></font>
<h3>__dropLock is a private helper function that drops exclusive access to filename via a locking file.</h3>
<p>    Inputs: filename = the file that exclusive access is required to.</p>

<p>    Returns: None</p>

<p>    Affects: Removes file filename + .LCK as a lock mechanism</p>

<p>    Exceptions: None.</p>



        <tr>
            <th bgcolor="#99ccff"
                rowspan="2"
                valign="top"
                align="left"
                width="20%"
                >
                <font color="#000000">
                  <a name="__getFilterStrList"></a>&nbsp;
                </font>
            </th>
            <th bgcolor="#99ccff"
                valign="top"
                align="left"
                >
                <font color="#000000">__getFilterStrList&nbsp;</font>
            </th>
        </tr>
        <tr>
        <td>
        <font color="#000088"><pre>
__getFilterStrList ( filterList )

</pre></font>
<h3>__getFilterStrList is a private helper function that creates 6 list describing filters needed by _Madrec.getIsprintReport.</h3>
<p>    Inputs: filterList - list of filter strings as passed in by report.py (See report.py for description).</p>

<p>    Returns: List of Six lists as follows:</p>
<ol><li><p>List giving filter types, len = # filters, items are <code>1</code>,'*','/','+', or <code>-</code></p>

</li>
<li><p>List with mnemonics of filter parameter 1 (items = # filters)</p>

</li>
<li><p>List with mnemonics of filter parameter 2 (items = # filters) (may be None)</p>

</li>
<li><p>List with number of ranges per filter (items = # filters)</p>

</li>
<li><p>List with doubles of filter lower limits (items = sum of number of ranges above)</p>

</li>
<li><p>List with doubles of filter upper limits (items = sum of number of ranges above)</p>

</li></ol>

<p>    Exceptions: None.</p>



        <tr>
            <th bgcolor="#99ccff"
                rowspan="2"
                valign="top"
                align="left"
                width="20%"
                >
                <font color="#000000">
                  <a name="__getLock"></a>&nbsp;
                </font>
            </th>
            <th bgcolor="#99ccff"
                valign="top"
                align="left"
                >
                <font color="#000000">__getLock&nbsp;</font>
            </th>
        </tr>
        <tr>
        <td>
        <font color="#000088"><pre>
__getLock ( filename )

</pre></font>
<h3>__getLock is a private helper function that provides exclusive access to filename via a locking file.</h3>
<p>    Inputs: filename = the file that exclusive access is required to.</p>

<p>    Returns: None</p>

<p>    Affects: Writes file filename + .LCK as a lock mechanism</p>

<p>    Exceptions: MadrigalError thrown if unable to write lock file</p>

<p>    Notes: Will sleep for 1 second at a time, for a maximum of 10 seconds 
    if the file is not modified. After each second, it will check for the lock file to be removed
    or modified. If it was modified, it resets the count to 0 sec and starts counting again. After
    _MaxSleep counts it then assumes lock file is orphaned and returns.  Orphaned file will be
    removed when dropLock is called.</p>


<table border="0" cellpadding="5" cellspacing="0" width="100%">

        <tr>
            <th bgcolor="#99ccff"
                rowspan="2"
                valign="top"
                align="left"
                width="20%"
                >
                <font color="#000000">
                  <a name="Exceptions">Exceptions</a>&nbsp;
                </font>
            </th>
            <th bgcolor="#99ccff"
                valign="top"
                align="left"
                >
                <font color="#000000">&nbsp;</font>
            </th>
        </tr>
        <tr>
        <td>
        
madrigal.admin.MadrigalError( "Unable to open " + filename + ".LCK as locking file ", None )<br>

</td></tr>
</table>
</td></tr>
</td></tr>
</table>

        </td>
        </tr>
        </table>

        <hr>

        <p><i><a href="../index.html">Table of Contents</a></i></p>

        <font size="-2"><i>This document was automatically generated
        on Tue Mar 17 10:13:25 2009 by
        <a href="http://happydoc.sourceforge.net">HappyDoc</a> version
        r1_5</i></font>
        
        </body>
        </html>
        
