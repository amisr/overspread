        <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
          "http://www.w3.org/TR/html40/loose.dtd">

        <html>
         
        <head>
        <title>Class: MadrigalInstrument</title>
        </head>

<BODY BGCOLOR=#FFFFFF LINK=#008000 VLINK=#003366>

        <p><i><a href="index.html">Table of Contents</a></i></p>
        
        <table border="0" cellpadding="5" cellspacing="0" width="100%">
        <tr bgcolor="#88bbee">
            <th rowspan="2"
                valign="top"
                align="left"
                width="10%"><font color="#000000">Class: MadrigalInstrument</font>
            </th>
            <th align="right"><font color="#000000">metadata.py</font></th>
        </tr>
        <tr>
        <td>
        <h3>MadrigalInstrument is an object that provides access to Madrigal instrument info from the metadata.</h3>
<p>    This object provides access to all Madrigal instrument information in the metadata files instTab.txt
    and instType.Tab.</p>

<p>    Usage example:</p>
<PRE>
        import madrigal.metadata

        import madrigal.admin

        try:

            test = madrigal.metadata.MadrigalInstrument()

            print test.getInstrumentName(30)

        except madrigal.admin.MadrigalError, e:

            print e.getExceptionStr()

</PRE>

<p>    Non-standard Python modules used:
    None</p>

<p>    MadrigalError exception thrown if:</p>
<ol><li><p>MadrigalMetadata fails to open or parse metadata file</p>

</li>
<li><p>Columns expected to be ints or floats cannot be converted</p>

</li></ol>

<p>    Change history:</p>

<p>    Written by <a href="mailto:wrideout@haystack.mit.edu">Bill Rideout</a>  Nov. 9, 2001</p>


<table border="0" cellpadding="5" cellspacing="0" width="100%">

        <tr>
            <th bgcolor="#99ccff"
                rowspan="2"
                valign="top"
                align="left"
                width="20%"
                >
                <font color="#000000">
                  <a name="Methods">Methods</a>&nbsp;
                </font>
            </th>
            <th bgcolor="#99ccff"
                valign="top"
                align="left"
                >
                <font color="#000000">&nbsp;</font>
            </th>
        </tr>
        <tr>
        <td>
        

            <table border="0" cellspacing="2" cellpadding="2" width="100%">
              <tr>
            <td align="LEFT" valign="TOP">
<a href="#__init__">__init__</a><br>
<a href="#__instrumentSort">__instrumentSort</a><br>
<a href="#getAltitude">getAltitude</a><br>
<a href="#getCategory">getCategory</a><br>
<a href="#getCategoryId">getCategoryId</a><br>
<a href="#getInstrumentList">getInstrumentList</a><br>
<a href="#getInstrumentMnemonic">getInstrumentMnemonic</a><br>
<a href="#getInstrumentName">getInstrumentName</a><br>
<a href="#getLatitude">getLatitude</a><br>
<a href="#getLongitude">getLongitude</a><br>
</td>
<td align="LEFT" valign="TOP">
<a href="#getOrderedInstrumentList">getOrderedInstrumentList</a><br>
<a href="#getOrderedInstrumentListWithData">getOrderedInstrumentListWithData</a><br>
</td>
</tr>
            </table>
            

        <tr>
            <th bgcolor="#99ccff"
                rowspan="2"
                valign="top"
                align="left"
                width="20%"
                >
                <font color="#000000">
                  <a name="__init__"></a>&nbsp;
                </font>
            </th>
            <th bgcolor="#99ccff"
                valign="top"
                align="left"
                >
                <font color="#000000">__init__&nbsp;</font>
            </th>
        </tr>
        <tr>
        <td>
        <font color="#000088"><pre>
__init__ (
        self,
        madDB=None,
        initFile=None,
        init2File=None,
        )

</pre></font>
<p>__init__ initializes MadrigalInstrument by reading from instTab.txt (or initFile)
        and instType.txt file (or init2File).</p>
<p>        Inputs:</p>
<p>            madDB - Existing MadrigalDB object, by default = None.</p>

<p>            initFile - String representing the full path to the metadata file. Default is None, in
            which case file read is MadrigalDB.getMetadataDir()/instTab.txt.</p>

<p>            init2File - String representing the full path to the metadata file instType.txt. Default is
            None, in which case file read is MadrigalDB.getMetadataDir()/instType.txt.</p>


<p>        Returns: void</p>

<p>        Affects: Initializes all the class member variables.</p>

<p>        Exceptions: MadrigalError thrown  by MadrigalMetadata if file not opened or parsed successfully.
        Note that the instTab.txt file was updated with the release of the madrigal python api, and this
        function will throw an error if used with the old file.</p>



        <tr>
            <th bgcolor="#99ccff"
                rowspan="2"
                valign="top"
                align="left"
                width="20%"
                >
                <font color="#000000">
                  <a name="__instrumentSort"></a>&nbsp;
                </font>
            </th>
            <th bgcolor="#99ccff"
                valign="top"
                align="left"
                >
                <font color="#000000">__instrumentSort&nbsp;</font>
            </th>
        </tr>
        <tr>
        <td>
        <font color="#000088"><pre>
__instrumentSort (
        self,
        thisInst,
        otherInst,
        )

</pre></font>
<p>instrumentSort is a private method used to sort tuples of instrument data</p>


        <tr>
            <th bgcolor="#99ccff"
                rowspan="2"
                valign="top"
                align="left"
                width="20%"
                >
                <font color="#000000">
                  <a name="getAltitude"></a>&nbsp;
                </font>
            </th>
            <th bgcolor="#99ccff"
                valign="top"
                align="left"
                >
                <font color="#000000">getAltitude&nbsp;</font>
            </th>
        </tr>
        <tr>
        <td>
        <font color="#000088"><pre>
getAltitude ( self,  kinst )

</pre></font>
<h3>getAltitude returns the altitude as a float that matches kinst argument, or None if not found or blank.</h3>
<p>        Inputs: kinst integer to get altitude.</p>

<p>        Returns: the altitude in km above sea level as a float that matches kinst argument, or None if not found or blank.</p>

<p>        Affects: None</p>

<p>        Exceptions: MadrigalError if any item in row cannot be cast to correct format</p>


<table border="0" cellpadding="5" cellspacing="0" width="100%">

        <tr>
            <th bgcolor="#99ccff"
                rowspan="2"
                valign="top"
                align="left"
                width="20%"
                >
                <font color="#000000">
                  <a name="Exceptions">Exceptions</a>&nbsp;
                </font>
            </th>
            <th bgcolor="#99ccff"
                valign="top"
                align="left"
                >
                <font color="#000000">&nbsp;</font>
            </th>
        </tr>
        <tr>
        <td>
        
madrigal.admin.MadrigalError('Error in instTab.txt parsing metadata row: ' + str( inst ), traceback.format_exception(sys.exc_info() [ 0 ], sys.exc_info() [ 1 ], sys.exc_info() [ 2 ] ) )<br>

</td></tr>
</table>

        <tr>
            <th bgcolor="#99ccff"
                rowspan="2"
                valign="top"
                align="left"
                width="20%"
                >
                <font color="#000000">
                  <a name="getCategory"></a>&nbsp;
                </font>
            </th>
            <th bgcolor="#99ccff"
                valign="top"
                align="left"
                >
                <font color="#000000">getCategory&nbsp;</font>
            </th>
        </tr>
        <tr>
        <td>
        <font color="#000088"><pre>
getCategory ( self,  kinst )

</pre></font>
<p>getCategory returns the instrument category that matches kinst argument as a string, or
        None if kinst not found.</p>
<p>        Inputs: kinst integer to get altitude.</p>

<p>        Returns: the instrument category that matches kinst argument as a string, or
        None if kinst not found.</p>

<p>        Affects: None</p>

<p>        Exceptions: MadrigalError if any item in row cannot be cast to correct format</p>


<table border="0" cellpadding="5" cellspacing="0" width="100%">

        <tr>
            <th bgcolor="#99ccff"
                rowspan="2"
                valign="top"
                align="left"
                width="20%"
                >
                <font color="#000000">
                  <a name="Exceptions">Exceptions</a>&nbsp;
                </font>
            </th>
            <th bgcolor="#99ccff"
                valign="top"
                align="left"
                >
                <font color="#000000">&nbsp;</font>
            </th>
        </tr>
        <tr>
        <td>
        
madrigal.admin.MadrigalError('Error in instTab.txt parsing metadata row: ' + str( inst ), traceback.format_exception(sys.exc_info() [ 0 ], sys.exc_info() [ 1 ], sys.exc_info() [ 2 ] ) )<br>
madrigal.admin.MadrigalError('Error in instTtpe.txt parsing metadata row: ' + str( inst2 ), traceback.format_exception(sys.exc_info() [ 0 ], sys.exc_info() [ 1 ], sys.exc_info() [ 2 ] ) )<br>

</td></tr>
</table>

        <tr>
            <th bgcolor="#99ccff"
                rowspan="2"
                valign="top"
                align="left"
                width="20%"
                >
                <font color="#000000">
                  <a name="getCategoryId"></a>&nbsp;
                </font>
            </th>
            <th bgcolor="#99ccff"
                valign="top"
                align="left"
                >
                <font color="#000000">getCategoryId&nbsp;</font>
            </th>
        </tr>
        <tr>
        <td>
        <font color="#000088"><pre>
getCategoryId ( self,  kinst )

</pre></font>
<p>getCategory returns the instrument category that matches kinst argument as a string, or
        None if kinst not found.</p>
<p>        Inputs: kinst integer to get altitude.</p>

<p>        Returns: the instrument category that matches kinst argument as a string, or
        None if kinst not found.</p>

<p>        Affects: None</p>

<p>        Exceptions: MadrigalError if any item in row cannot be cast to correct format</p>


<table border="0" cellpadding="5" cellspacing="0" width="100%">

        <tr>
            <th bgcolor="#99ccff"
                rowspan="2"
                valign="top"
                align="left"
                width="20%"
                >
                <font color="#000000">
                  <a name="Exceptions">Exceptions</a>&nbsp;
                </font>
            </th>
            <th bgcolor="#99ccff"
                valign="top"
                align="left"
                >
                <font color="#000000">&nbsp;</font>
            </th>
        </tr>
        <tr>
        <td>
        
madrigal.admin.MadrigalError('Error in instTab.txt parsing metadata row: ' + str( inst ), traceback.format_exception(sys.exc_info() [ 0 ], sys.exc_info() [ 1 ], sys.exc_info() [ 2 ] ) )<br>

</td></tr>
</table>

        <tr>
            <th bgcolor="#99ccff"
                rowspan="2"
                valign="top"
                align="left"
                width="20%"
                >
                <font color="#000000">
                  <a name="getInstrumentList"></a>&nbsp;
                </font>
            </th>
            <th bgcolor="#99ccff"
                valign="top"
                align="left"
                >
                <font color="#000000">getInstrumentList&nbsp;</font>
            </th>
        </tr>
        <tr>
        <td>
        <font color="#000088"><pre>
getInstrumentList ( self )

</pre></font>
<h3>getInstrumentList returns a list of all instrument names, mnemonics, and their kinst values.</h3>
<p>        Inputs: None.</p>

<p>        Returns: a list of all instrument names, mnemonics, and their kinst values.  Each item in the list
        is a tuple of the form (Instrument Name (string), mnemonic (string), kinst (integer)).  Example item:
        (<code>Millstone Hill UHF Steerable Antenna</code>, <code>mlh</code>, 31)</p>

<p>        Affects: None</p>

<p>        Exceptions: MadrigalError if any item in row cannot be cast to correct format</p>


<table border="0" cellpadding="5" cellspacing="0" width="100%">

        <tr>
            <th bgcolor="#99ccff"
                rowspan="2"
                valign="top"
                align="left"
                width="20%"
                >
                <font color="#000000">
                  <a name="Exceptions">Exceptions</a>&nbsp;
                </font>
            </th>
            <th bgcolor="#99ccff"
                valign="top"
                align="left"
                >
                <font color="#000000">&nbsp;</font>
            </th>
        </tr>
        <tr>
        <td>
        
madrigal.admin.MadrigalError('Error in instTab.txt parsing metadata row: ' + str( inst ), traceback.format_exception(sys.exc_info() [ 0 ], sys.exc_info() [ 1 ], sys.exc_info() [ 2 ] ) )<br>

</td></tr>
</table>

        <tr>
            <th bgcolor="#99ccff"
                rowspan="2"
                valign="top"
                align="left"
                width="20%"
                >
                <font color="#000000">
                  <a name="getInstrumentMnemonic"></a>&nbsp;
                </font>
            </th>
            <th bgcolor="#99ccff"
                valign="top"
                align="left"
                >
                <font color="#000000">getInstrumentMnemonic&nbsp;</font>
            </th>
        </tr>
        <tr>
        <td>
        <font color="#000088"><pre>
getInstrumentMnemonic ( self,  kinst )

</pre></font>
<h3>getInstrumentMnemonic returns the 3 char instrument mnemonic that matches kinst argument, or None if not found.</h3>
<p>        Inputs: kinst integer to get instrument mnemonic.</p>

<p>        Returns: the instrument mnemonic that matches kinst argument, or None if not found.</p>

<p>        Affects: None</p>

<p>        Exceptions: MadrigalError if any item in row cannot be cast to correct format</p>


<table border="0" cellpadding="5" cellspacing="0" width="100%">

        <tr>
            <th bgcolor="#99ccff"
                rowspan="2"
                valign="top"
                align="left"
                width="20%"
                >
                <font color="#000000">
                  <a name="Exceptions">Exceptions</a>&nbsp;
                </font>
            </th>
            <th bgcolor="#99ccff"
                valign="top"
                align="left"
                >
                <font color="#000000">&nbsp;</font>
            </th>
        </tr>
        <tr>
        <td>
        
madrigal.admin.MadrigalError('Error in instTab.txt parsing metadata row: ' + str( inst ), traceback.format_exception(sys.exc_info() [ 0 ], sys.exc_info() [ 1 ], sys.exc_info() [ 2 ] ) )<br>

</td></tr>
</table>

        <tr>
            <th bgcolor="#99ccff"
                rowspan="2"
                valign="top"
                align="left"
                width="20%"
                >
                <font color="#000000">
                  <a name="getInstrumentName"></a>&nbsp;
                </font>
            </th>
            <th bgcolor="#99ccff"
                valign="top"
                align="left"
                >
                <font color="#000000">getInstrumentName&nbsp;</font>
            </th>
        </tr>
        <tr>
        <td>
        <font color="#000088"><pre>
getInstrumentName ( self,  kinst )

</pre></font>
<h3>getInstrumentName returns the instrument name that matches kinst argument, or None if not found.</h3>
<p>        Inputs: kinst integer to get instrument name.</p>

<p>        Returns: the instrument name that matches kinst argument, or None if not found.</p>

<p>        Affects: None</p>

<p>        Exceptions: MadrigalError if any item in row cannot be cast to correct format</p>


<table border="0" cellpadding="5" cellspacing="0" width="100%">

        <tr>
            <th bgcolor="#99ccff"
                rowspan="2"
                valign="top"
                align="left"
                width="20%"
                >
                <font color="#000000">
                  <a name="Exceptions">Exceptions</a>&nbsp;
                </font>
            </th>
            <th bgcolor="#99ccff"
                valign="top"
                align="left"
                >
                <font color="#000000">&nbsp;</font>
            </th>
        </tr>
        <tr>
        <td>
        
madrigal.admin.MadrigalError('Error in instTab.txt parsing metadata row: ' + str( inst ), traceback.format_exception(sys.exc_info() [ 0 ], sys.exc_info() [ 1 ], sys.exc_info() [ 2 ] ) )<br>

</td></tr>
</table>

        <tr>
            <th bgcolor="#99ccff"
                rowspan="2"
                valign="top"
                align="left"
                width="20%"
                >
                <font color="#000000">
                  <a name="getLatitude"></a>&nbsp;
                </font>
            </th>
            <th bgcolor="#99ccff"
                valign="top"
                align="left"
                >
                <font color="#000000">getLatitude&nbsp;</font>
            </th>
        </tr>
        <tr>
        <td>
        <font color="#000088"><pre>
getLatitude ( self,  kinst )

</pre></font>
<h3>getLatitude returns the latitude as a float that matches kinst argument, or None if not found or blank.</h3>
<p>        Inputs: kinst integer to get latitude.</p>

<p>        Returns: the latitude as a float that matches kinst argument, or None if not found or blank.</p>

<p>        Affects: None</p>

<p>        Exceptions: MadrigalError if any item in row cannot be cast to correct format</p>


<table border="0" cellpadding="5" cellspacing="0" width="100%">

        <tr>
            <th bgcolor="#99ccff"
                rowspan="2"
                valign="top"
                align="left"
                width="20%"
                >
                <font color="#000000">
                  <a name="Exceptions">Exceptions</a>&nbsp;
                </font>
            </th>
            <th bgcolor="#99ccff"
                valign="top"
                align="left"
                >
                <font color="#000000">&nbsp;</font>
            </th>
        </tr>
        <tr>
        <td>
        
madrigal.admin.MadrigalError('Error in instTab.txt parsing metadata row: ' + str( inst ), traceback.format_exception(sys.exc_info() [ 0 ], sys.exc_info() [ 1 ], sys.exc_info() [ 2 ] ) )<br>

</td></tr>
</table>

        <tr>
            <th bgcolor="#99ccff"
                rowspan="2"
                valign="top"
                align="left"
                width="20%"
                >
                <font color="#000000">
                  <a name="getLongitude"></a>&nbsp;
                </font>
            </th>
            <th bgcolor="#99ccff"
                valign="top"
                align="left"
                >
                <font color="#000000">getLongitude&nbsp;</font>
            </th>
        </tr>
        <tr>
        <td>
        <font color="#000088"><pre>
getLongitude ( self,  kinst )

</pre></font>
<h3>getLongitude returns the longitude as a float that matches kinst argument, or None if not found or blank.</h3>
<p>        Inputs: kinst integer to get longitude.</p>

<p>        Returns: the longitude as a float that matches kinst argument, or None if not found or blank.</p>

<p>        Affects: None</p>

<p>        Exceptions: MadrigalError if any item in row cannot be cast to correct format</p>


<table border="0" cellpadding="5" cellspacing="0" width="100%">

        <tr>
            <th bgcolor="#99ccff"
                rowspan="2"
                valign="top"
                align="left"
                width="20%"
                >
                <font color="#000000">
                  <a name="Exceptions">Exceptions</a>&nbsp;
                </font>
            </th>
            <th bgcolor="#99ccff"
                valign="top"
                align="left"
                >
                <font color="#000000">&nbsp;</font>
            </th>
        </tr>
        <tr>
        <td>
        
madrigal.admin.MadrigalError('Error in instTab.txt parsing metadata row: ' + str( inst ), traceback.format_exception(sys.exc_info() [ 0 ], sys.exc_info() [ 1 ], sys.exc_info() [ 2 ] ) )<br>

</td></tr>
</table>

        <tr>
            <th bgcolor="#99ccff"
                rowspan="2"
                valign="top"
                align="left"
                width="20%"
                >
                <font color="#000000">
                  <a name="getOrderedInstrumentList"></a>&nbsp;
                </font>
            </th>
            <th bgcolor="#99ccff"
                valign="top"
                align="left"
                >
                <font color="#000000">getOrderedInstrumentList&nbsp;</font>
            </th>
        </tr>
        <tr>
        <td>
        <font color="#000088"><pre>
getOrderedInstrumentList ( self )

</pre></font>
<p>getOrderedInstrumentList returns a list of all (instrument names, mnemonics, kinst, categories, categoryId),
        ordered by categoryId and then kinst.</p>
<p>        Inputs: None.</p>

<p>        Returns: a list of tuples of (instrument name, mnemonic, kinst, category, categoryId) ordered by categoryId and
        then kinst.    Example item:
        (<code>Millstone Hill UHF Steerable Antenna</code>, <code>mlh</code>, 31, <code>Incoherent Scatter Radars</code>, 1)</p>

<p>        Affects: None</p>

<p>        Exceptions: MadrigalError if any item in row cannot be cast to correct format</p>


<table border="0" cellpadding="5" cellspacing="0" width="100%">

        <tr>
            <th bgcolor="#99ccff"
                rowspan="2"
                valign="top"
                align="left"
                width="20%"
                >
                <font color="#000000">
                  <a name="Exceptions">Exceptions</a>&nbsp;
                </font>
            </th>
            <th bgcolor="#99ccff"
                valign="top"
                align="left"
                >
                <font color="#000000">&nbsp;</font>
            </th>
        </tr>
        <tr>
        <td>
        
madrigal.admin.MadrigalError('Error in instTab.txt parsing metadata row: ' + str( inst ), traceback.format_exception(sys.exc_info() [ 0 ], sys.exc_info() [ 1 ], sys.exc_info() [ 2 ] ) )<br>

</td></tr>
</table>

        <tr>
            <th bgcolor="#99ccff"
                rowspan="2"
                valign="top"
                align="left"
                width="20%"
                >
                <font color="#000000">
                  <a name="getOrderedInstrumentListWithData"></a>&nbsp;
                </font>
            </th>
            <th bgcolor="#99ccff"
                valign="top"
                align="left"
                >
                <font color="#000000">getOrderedInstrumentListWithData&nbsp;</font>
            </th>
        </tr>
        <tr>
        <td>
        <font color="#000088"><pre>
getOrderedInstrumentListWithData (
        self,
        isTrusted,
        localOnly=False,
        localExpObj=None,
        globalExpObj=None,
        allowArchive=False,
        )

</pre></font>
<h3>getInstrumentList returns information about which instruments have local and global data.</h3>
<p>        Inputs:</p>
<p>                isTrusted - True if client is trusted, False otherwise</p>

<p>                localOnly - if False (the default), will return information about both local and global data.
                    If True, then global data ignored.</p>

<p>                localExpObj - an MadrigalExperiment object for the local data.  If None (the default),
                    will be created.</p>

<p>                globalExpObj - an MadrigalExperiment object for the global data.  If None (the default),
                    will be created if not localOnly.</p>

<p>                allowArchive - if True, allow experiments marked as security==2(public arcive), and if
                    isTrusted, allow security==3(private archive)</p>


<p>        Returns: an ordered tuple of two items:
            1. a list of tuples of (instName, localStartYear, localEndYear, globalStartYear,
               globalEndYear, kinst, categoryId), ordered by by categoryId, then kinst.  If
               localOnly, globalStartYear and globalEndYear = 0.  If not local only, localStartYear
               and localEndYear will be zero if no local data for that instrument.
            2. categoryDict - key = categoryId, value = category Description</p>

<p>        Affects: None</p>

<p>        Exceptions: MadrigalError if any item in row cannot be cast to correct format</p>


</td></tr>
</td></tr>
</table>

        </td>
        </tr>
        </table>

        <hr>

        <p><i><a href="index.html">Table of Contents</a></i></p>

        <font size="-2"><i>This document was automatically generated
        on Tue Mar 17 10:13:25 2009 by
        <a href="http://happydoc.sourceforge.net">HappyDoc</a> version
        r1_5</i></font>
        
        </body>
        </html>
        
